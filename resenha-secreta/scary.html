<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scary</title>
  <style>
    html,body{height:100%;margin:0;font-family:Arial,sans-serif}
    body{
      background: url("scary.gif") center/cover no-repeat fixed;
      background-color:#000;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    #arabic{font-size:56px;color:#ff3b3b;text-align:center;z-index:2;pointer-events:none}
    #ask{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,0.85);
      z-index:10;
    }
    #ask button{padding:16px 28px;font-size:20px;cursor:pointer}
  </style>
</head>
<body>
  <div id="arabic"></div>

  <div id="ask">
    <button id="startManual">Tocar som e continuar</button>
  </div>

  <audio id="scaryAudio" src="04. Untimely Demise.mp3" preload="auto" playsinline></audio>

<script>
(function(){
  const want = sessionStorage.getItem('startScary');
  sessionStorage.removeItem('startScary');
  const audio = document.getElementById('scaryAudio');
  const box = document.getElementById('arabic');
  const ask = document.getElementById('ask');
  const startManual = document.getElementById('startManual');
  if(!want) return;

  function blinkAndDone(){
    let count=0;
    (function blink(){
      if(count>=12) return;
      box.textContent = box.textContent==='' ? 'خروج من اللعبة' : '';
      count++;
      setTimeout(blink,150);
    })();
  }

  function showManual(){
    ask.style.display='flex';
  }

  startManual.onclick = ()=>{
    ask.style.display='none';
    audio.currentTime = 0;
    audio.play().catch(()=>{});
    blinkAndDone();
  };

  const p = audio.play();
  if(p !== undefined){
    p.then(()=> blinkAndDone()).catch(()=> showManual());
  } else {
    blinkAndDone();
  }
})();
</script>
</body>
</html>
