<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Game Over</title>

<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-family: Arial, Helvetica, sans-serif;
        background: #000;
    }

    body {
        background-image: url("backstage.png");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: left center;
        color: #fff;
    }

    #unlockAudioBtn {
        display: none;
        position: fixed;
        left: 50%;
        bottom: 20%;
        transform: translateX(-50%);
        z-index: 5;
    }

    #unlockAudioBtn button {
        padding: 12px 18px;
        background: #ff4444;
        color: #fff;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 700;
    }
</style>
</head>

<body>

<audio id="gameOverMusic" src="gameover.mp3" preload="auto"></audio>
<audio id="boomSound" src="nightshift/audios/boom.mp3" preload="auto"></audio>

<div id="unlockAudioBtn">
    <button id="unlockBtn">Clique para ouvir a m√∫sica</button>
</div>

<script>
(function() {
    const audio = document.getElementById("gameOverMusic");
    const boom = document.getElementById("boomSound");

    function startGameOverTimer(){
        setTimeout(() => {
            try { 
                boom.currentTime = 0; 
                boom.play(); 
            } catch(e){}
            
            try { audio.pause(); } catch(e){}

            setTimeout(() => {
                window.location.href = "nightshift.html";
            }, 900);

        }, 9000);
    }

    function tryPlayAudio(){
        try {
            audio.currentTime = 0;
            const p = audio.play();

            if (p) {
                p.then(startGameOverTimer)
                 .catch(() => {
                    startGameOverTimer();
                    document.getElementById("unlockAudioBtn").style.display = "block";
                 });
            } else {
                startGameOverTimer();
            }

        } catch(e) {
            startGameOverTimer();
            document.getElementById("unlockAudioBtn").style.display = "block";
        }
    }

    document.getElementById("unlockBtn").onclick = function(){
        try {
            audio.play();
            document.getElementById("unlockAudioBtn").style.display = "none";
        } catch(e){
            document.getElementById("unlockAudioBtn").style.display = "none";
        }
    };

    tryPlayAudio();
})();
</script>

</body>
</html>
